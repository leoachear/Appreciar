<section id="alta-producto" ng-cloak> <!-- ng-controller="FinderController as ctrl" -->

    <h3>Sobre qué producto querés postear???</h3>

    <!-- AUTOCOMPLETE -->
    <md-content class="md-padding" style="height:500px;">
      <!--
      <form ng-submit="$event.preventDefault()">
        <md-autocomplete
        ng-disabled="isDisabled"
        md-no-cache="noCache"
        md-selected-item="selectedItem"
        md-search-text-change="searchTextChange(searchText)"
        md-search-text="searchText"
        md-selected-item-change="selectedItemChange(item)"
        md-items="item in querySearch(searchText)"
        md-item-text="item.display"
        md-min-length="3"
        placeholder="Seleccionar Producto">
          <md-item-template>
          <span md-highlight-text="searchText" md-highlight-flags="^i">{{item.display}}</span>
          </md-item-template>
          <md-not-found>
          El producto "{{searchText}}" no está en nuestra lista.
          <a ng-click="newState(searchText)">Quiero crearlo</a>
          </md-not-found>
        </md-autocomplete>
      </form>
      -->

      <md-content layout-padding>
      <form name="myForm">
        <md-input-container class="md-block">
          <md-select name="prod" placeholder="Seleccione el Producto" ng-model="producto_seleccionado" md-on-open="loadProductos()" style="min-width: 200px;" ng-required="true">
            <md-option ng-value="producto" ng-repeat="producto in productosDesplegable">{{producto.nombre}}</md-option>
          </md-select>
          <div ng-messages="myForm.prod.$error">
            <div ng-message="required">Producto es requerido.</div>
          </div>
        </md-input-container>
        <md-input-container>
          <label>Precios</label>
          <input name="name" ng-model="producto_precio" ng-required="true">
          <div ng-messages="myForm.name.$error">
            <div ng-message="required">Precio es requerido.</div>
          </div>
        </md-input-container>

        <md-input-container class="md-block">
            <label>Dirección</label>
            <input ng-model="view.addressInput" ng-model-options="{debounce: 3000}" ng-change="buscarDireccion()" />
        </md-input-container>
        <div class="md-block">
          <md-input-container class="md-block">
            <label>Ubicaciones disponibles</label>
            <md-select ng-model="view.selectedPlace" ng-disabled="view.places.length < 2" ng-change="centrarUbicacion()">
              <md-option ng-repeat="place in view.places" value="{{place.place_id}}">{{place.formatted_address}}</md-option>
            </md-select>
          </md-input-container>
          <md-button ng-click="postear()" class="md-raised md-primary" ng-disabled="!(producto_seleccionado && producto_precio)">Postear</md-button>
          <md-button class="md-icon-button" ng-click="borrarMarcadores()" ng-disabled="view.markers.length === 0">
            <md-icon md-svg-icon="white_delete" aria-label="Borrar"></md-icon>
            <md-tooltip md-delay="1500" md-autohide="true">Borrar</md-tooltip>
          </md-button>
        </div>
        </form>
      </md-content>

          <div id="map" class="altura-mapa"></div>

          
          <!--
          <p class="md-caption">Seleccionaste el producto: {{ producto_seleccionado ? producto_seleccionado : 'Ninguna' }}</p>
          <p>Id de producto:  {{producto_seleccionado}}</p>
          
      </div>-->


<!--
      <button onclick="location.href='#/mapaForm.html'" id="seguir" style="margin-top:1em;" class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored">
        <i class="material-icons">keyboard_arrow_right
        </i>
      </button>
      <div class="mdl-tooltip mdl-tooltip--large" for="seguir">Continuar</div>
    </md-content>
    -->


  <!--

    <!-- Productos que se van filtrando?...... ->
    <md-content class="md-padding layout-row" layout-xs="column" layout-wrap ng-cloak>
      <div flex="auto">
        <!-- ng-repeat="prod in productosBuscar"  -->
        <!-- <product-card producto=seleccionado</product-card> ->
      </div>
    </md-content>
    -->

</section>

<script type="text/ng-template" id="icons_24x24.svg">
  <svg 
       width="24"
       height="24" 
       viewBox="0 0 24 24" 
       xmlns="http://www.w3.org/2000/svg">
      <g id="white_delete">
          <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" />
          <path d="M0 0h24v24H0z" fill="none" />
      </g>
  </svg>
</script>